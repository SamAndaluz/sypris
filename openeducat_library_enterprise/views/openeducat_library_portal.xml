<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="portal_my_home_library_media_queue_list" name="Portal My Home  Core Details"
              inherit_id="portal.portal_my_home"
              priority="20">

        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <t t-if="user_id.sudo().is_parent or user_id.sudo().is_student" t-call="portal.portal_docs_entry">
                <t t-set="title">Library All Media Details</t>
                <t t-set="url" t-value="'/library/media/'"/>
            </t>
        </xpath>

        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <t t-if="user_id.sudo().is_parent" t-call="portal.portal_docs_entry">
                <t t-set="title">Media Movement</t>

                <t t-if="is_parent">
                    <t t-set="url" t-value="'/media/movement/list/'+ student_id"/>
                </t>
            </t>
        </xpath>
    </template>

    <template id="openeducat_librart_midia_portal">
        <t t-call="portal.portal_layout">

            <t t-call="portal.portal_searchbar">
                <t t-set="title">All Media Information</t>
            </t>
            <t t-if="not library_ids">
                <p>There are currently no information for your account!!!</p>
            </t>

            <div t-if="library_ids" style="background-color:white; padding: 2px 40px 20px 40px;">
                <div class="mt32">
                    <div t-if="user_id.sudo().is_student" class="row mb16 text-center">
                        <div>
                            <a t-attf-href="/media/queue/request">
                                <button>Media Queue Request</button>
                            </a>
                        </div>
                        <div>
                            <a t-attf-href="/media/purchase/request">
                                <button>Media Purchase Request</button>
                            </a>
                        </div>
                    </div>
                    <table class="table table-condensed">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Media Type</th>
                                <th>ISBN Code</th>
                                <th>Internal Code</th>
                                <th>Edition</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-if="library_ids" t-foreach="library_ids" t-as="library_media">
                                <tr>
                                    <td>
                                        <a t-attf-href="/library/media/#{library_media.id}">
                                            <span t-esc="library_media.name"/>
                                        </a>
                                    </td>
                                    <td>
                                        <span t-esc="library_media.media_type_id.name"/>
                                    </td>
                                    <td>
                                        <span t-esc="library_media.isbn"/>
                                    </td>
                                    <td>
                                        <span t-esc="library_media.internal_code"/>
                                    </td>
                                    <td>
                                        <span t-esc="library_media.edition"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </div>
            </div>
        </t>
    </template>

    <template id="openeducat_library_media_data">
        <t t-call="portal.portal_layout">

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Library All Media Information</t>
            </t>
            <t t-if="not library_ids">
                <p>There are currently no information for your account!!!</p>
            </t>

            <div t-if="library_ids" style="background-color:white; padding: 20px 40px 20px 40px;">
                <t t-if="library_ids" t-foreach="library_ids" t-as="media_data">
                    <div class="mt16">
                        <div t-if="media_data.name" class="row col-md-12">
                            <strong>
                                <span style="font-size:24px;" t-esc="media_data.name"/>
                            </strong>
                        </div>
                        <div class="mt16"/>
                        <div class="row col-md-12">
                            <div class="row col-md-6">
                                <div t-if="media_data.author_ids" class="col-md-4">
                                    <strong>Author:</strong>
                                </div>
                                <div t-if="media_data.author_ids" class="col-md-8">
                                    <t t-foreach="media_data.author_ids" t-as="author">
                                        <span t-esc="author.name"/>
                                        <br/>
                                    </t>
                                </div>
                                <div t-if="media_data.isbn" class="col-md-4">
                                    <strong>ISBN Code:</strong>
                                </div>
                                <div t-if="media_data.isbn" class="col-md-8">
                                    <span t-esc="media_data.isbn"/>
                                </div>
                                <div t-if="media_data.edition" class="col-md-4">
                                    <strong>Edition:</strong>
                                </div>
                                <div t-if="media_data.edition" class="col-md-8">
                                    <span t-esc="media_data.edition"/>
                                </div>
                                <div t-if="media_data.media_type_id.name" class="col-md-4">
                                    <strong>Media Type:</strong>
                                </div>
                                <div t-if="media_data.media_type_id.name" class="col-md-8">
                                    <span t-esc="media_data.media_type_id.name"/>
                                </div>
                            </div>
                            <div class="row col-md-6">
                                <div t-if="media_data.publisher_ids" class="col-md-4">
                                    <strong>Publisher:</strong>
                                </div>
                                <div t-if="media_data.publisher_ids" class="col-md-8">
                                    <t t-foreach="media_data.publisher_ids" t-as="publisher">
                                        <span t-esc="publisher.name"/>
                                        <br/>
                                    </t>
                                </div>
                                <div t-if="media_data.internal_code" class="col-md-4">
                                    <strong>Code:</strong>
                                </div>
                                <div t-if="media_data.internal_code" class="col-md-8">
                                    <span t-esc="media_data.internal_code"/>
                                </div>
                                <div t-if="media_data.tags" class="col-md-4">
                                    <strong>Tags:</strong>
                                </div>
                                <div t-if="media_data.tags" class="col-md-8">
                                    <t t-foreach="media_data.tags" t-as="tag">
                                        <span t-esc="tag.name"/>
                                        <br/>
                                    </t>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div t-if="media_data.description" class="mt32">
                        <h4>Description</h4>
                        <table class="table table-condensed">
                            <tbody>
                                <tr>
                                    <td>
                                        <span t-esc="media_data.description"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div t-if="media_data.course_ids" class="mt32">
                        <h4>Educational Details</h4>
                        <table class="table table-condensed">
                            <thead>
                                <tr>
                                    <th>Courses</th>
                                    <th>Subjects</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>admin
                                    <td>
                                        <t t-foreach="media_data.course_ids" t-as="course">
                                            <span t-esc="course.name"/>
                                            <br/>
                                        </t>
                                    </td>
                                    <td>
                                        <t t-foreach="media_data.subject_ids" t-as="subjet">
                                            <span t-esc="subjet.name"/>
                                            <br/>
                                        </t>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <t t-if="media_data.queue_ids">
                        <div class="mt32">
                            <h4>Media Queue Request</h4>
                        </div>
                    </t>
                    <table class="table table-condensed">
                        <thead>
                            <tr>
                                <th>From Date</th>
                                <th>To Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-if="media_data.queue_ids" t-foreach="media_data.queue_ids" t-as="media_lines">
                                <tr>
                                    <td>
                                        <span t-esc="media_lines.date_from"/>
                                    </td>
                                    <td>
                                        <span t-esc="media_lines.date_to"/>
                                    </td>
                                    <td>
                                        <span t-esc="{'false':false, 'accept':'Accepted', 'reject':'Rejected',
                                    'request':'Request'}[media_lines.state]"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </t>
            </div>
        </t>
    </template>

    <template id="portal_student_media_movement_list">
        <t t-call="portal.portal_layout">

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Media Movement Information</t>
            </t>
            <t t-if="not media_movement_ids">
                <p>There are currently no information for your account!!!</p>
            </t>

            <div t-if="media_movement_ids" style="background-color:white; padding: 20px 40px 20px 40px;">
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Library card</th>
                            <th>Person</th>
                            <th>Media</th>
                            <th>Media Unit</th>
                            <th style="width:120px;">Issued Date</th>
                            <th style="width:100px;">Due Date</th>
                            <th style="width:160px;">Actual Return Date</th>
                            <th>Penalty</th>
                            <th>status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-if="media_movement_ids" t-foreach="media_movement_ids" t-as="media_data">
                            <tr>
                                <td>
                                    <a t-attf-href="/media/movement/information/#{media_data.id}">
                                        <t t-esc="media_data.library_card_id.number"/>
                                    </a>
                                </td>
                                <td>
                                    <t t-esc="media_data.student_id.name"/>
                                </td>
                                <td>
                                    <t t-esc="media_data.media_id.name"/>
                                </td>
                                <td>
                                    <t t-esc="media_data.media_unit_id.name"/>
                                </td>
                                <td>
                                    <t t-esc="media_data.issued_date"/>
                                </td>
                                <td>
                                    <t t-esc="media_data.return_date"/>
                                </td>
                                <td>
                                    <t t-esc="media_data.actual_return_date"/>
                                </td>
                                <td>
                                    <t t-esc="media_data.penalty"/>
                                </td>
                                <td>
                                    <t t-esc="{'false':False, 'return':'Return','return_done':'Returned Done',
                                    'available':'Available', 'issue':'Issued'}[media_data.state]"/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>
    </template>

    <template id="portal_student_media_movement_information">
        <t t-call="portal.portal_layout">

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Media Movement Information</t>
            </t>
            <t t-if="not media_movement_ids">
                <p>There are currently no information for your account!!!</p>
            </t>

            <div t-if="media_movement_ids" style="background-color:white; padding: 20px 40px 20px 40px;">
                <div class="mt16">

                    <div t-if="media_movement_ids" class="row col-md-12">

                        <div class="row col-md-6">
                            <div t-if="media_movement_ids.media_id.name" class="col-md-4">
                                <strong>Media:</strong>
                            </div>
                            <div t-if="media_movement_ids.media_id.name" class="col-md-8">
                                <t t-esc="media_movement_ids.media_id.name"/>
                            </div>
                            <div t-if="media_movement_ids.media_unit_id.name" class="col-md-4">
                                <strong>Media Unit:</strong>
                            </div>
                            <div t-if="media_movement_ids.media_unit_id.name" class="col-md-8">
                                <t t-esc="media_movement_ids.media_unit_id.name"/>
                            </div>
                            <div t-if="media_movement_ids.invoice_id.name" class="col-md-4">
                                <strong>Invoice:</strong>
                            </div>
                            <div t-if="media_movement_ids.invoice_id.name" class="col-md-8">
                                <t t-esc="media_movement_ids.invoice_id.name"/>
                            </div>
                        </div>
                        <div class="row col-md-6">
                            <div t-if="media_movement_ids.media_type_id.name" class="col-md-6">
                                <strong>Media Type:</strong>
                            </div>
                            <div t-if="media_movement_ids.media_type_id.name" class="col-md-6">
                                <t t-esc="media_movement_ids.media_type_id.name"/>
                            </div>
                            <div t-if="media_movement_ids.queue_count" class="col-md-6">
                                <strong>Media Queue Count:</strong>
                            </div>
                            <div t-if="media_movement_ids.queue_count" class="col-md-6">
                                <t t-esc="media_movement_ids.queue_count"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt32 col-md-12">
                    <h4>Student / Faculty Detail</h4>
                </div>
                <div class="row mt8 col-md-12">
                    <div class="row col-md-6">
                        <div class="col-md-4">
                            <strong>Library Card:</strong>
                        </div>
                        <div class="col-md-8">
                            <t t-esc="media_movement_ids.library_card_id.number"/>
                        </div>
                        <div class="col-md-4">
                            <strong>Student:</strong>
                        </div>
                        <div class="col-md-8">
                            <t t-esc="media_movement_ids.student_id.name"/>
                        </div>
                    </div>
                    <div class="row col-md-6">
                        <div class="col-md-6">
                            <strong>Student / Faculty:</strong>
                        </div>
                        <div class="col-md-6">
                            <t t-esc="media_movement_ids.type"/>
                        </div>
                        <div class="col-md-6">
                            <strong>Status:</strong>
                        </div>
                        <div class="col-md-6">
                            <t t-esc="{'false':False, 'available':'Available','issue':'Issued',
                            'lost':'Lost','return':'Return','return_done':'Return_Done'}[media_movement_ids.state]"/>
                        </div>
                    </div>
                </div>
                <div class="row mt32 col-md-12">
                    <div class="row col-md-6">
                        <div class="col-md-4">
                            <strong>Issued Date:</strong>
                        </div>
                        <div class="col-md-8">
                            <t t-esc="media_movement_ids.issued_date"/>
                        </div>
                        <div class="col-md-4">
                            <strong>Due Date:</strong>
                        </div>
                        <div class="col-md-8">
                            <t t-esc="media_movement_ids.return_date"/>
                        </div>
                    </div>
                    <div class="row col-md-6">
                        <div class="col-md-6">
                            <strong>Actual Return Date:</strong>
                        </div>
                        <div class="col-md-6">
                            <t t-esc="media_movement_ids.actual_return_date"/>
                        </div>
                        <div class="col-md-6">
                            <strong>Penalty:</strong>
                        </div>
                        <div class="col-md-6">
                            <t t-esc="media_movement_ids.penalty"/>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

</odoo>